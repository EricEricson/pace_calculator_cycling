<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

    <title>Pace-Calculation - Cycling</title>

    <style>
        .range-wrap {
            position: relative;
            margin: 0 auto 3rem;
        }

        .range {
            width: 100%;
        }

        .bubble {
            background: rgb(117, 117, 117);
            color: white;
            padding: 4px 12px;
            position: absolute;
            border-radius: 4px;
            left: 50%;
            top: 75%;
            transform: translateX(-50%);
        }

        .bubble::after {
            content: "";
            position: absolute;
            width: 2px;
            height: 2px;
            background: rgb(117, 117, 117);
            top: -1px;
            left: 50%;
        }
    </style>

</head>

<body>
    <section>
        <div class="container">
            <div class="row">
                <div class="col-lg-12 mt-5 text-center">
                    <h1>Pace-Calculation - Cycling</h1>

                    <div class="col-lg-8 offset-lg-2 mt-4">
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="distanceR" placeholder="">
                            <label for="distanceR">Distance (km)</label>
                        </div>
                        
                        <div class="range-wrap">
                            <input type="range" class="form-range range" id="kmhR" min="20" max="40" step="0.5">
                            <output class="bubble"></output>
                        </div>

                        <div class="row">
                            <div class="col-3 fs-1" id="shoursR">00</div>
                            <div class="col-1 fs-1">:</div>
                            <div class="col-3 fs-1" id="sminR">00</div>
                            <div class="col-1 fs-1">:</div>
                            <div class="col-3 fs-1" id="ssecR">00</div>
                        </div>
                        <div class="row"> 
                            <div class="col-3 fs-6">HH</div>
                            <div class="col-1 fs-6"></div>
                            <div class="col-3 fs-6">MM</div>
                            <div class="col-1 fs-6"></div>
                            <div class="col-3 fs-6">SS</div>
                        </div>
                        
                    </div>

                </div>
            </div>
        </div>
    </section>
</body>

<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    // CALCULATION
    $(document).ready(function(){
        $("#distanceR").keyup(function(){
            calculate();

        });
        $("#kmhR").change(function(){
            calculate();
        });
    });

    function calculate() {
        var distance = Number(document.getElementById('distanceR').value);
        var speed = Number(document.getElementById('kmhR').value);

        if (distance > 0 && speed > 0) {
            //*when distance + speed
            resulZeit = (distance * 60) / speed;
            resultHundred = (5 * 60) / speed;

            document.getElementById('shoursR').innerHTML = Math.floor(resulZeit / 60);
            document.getElementById('sminR').innerHTML = Math.floor(resulZeit % 60);
            document.getElementById('ssecR').innerHTML = Math.round(Math.floor((resulZeit % 1) * 100) / 100 * 60);

        } else {
            document.getElementById('kmhR').value = 30;
            document.getElementById('distanceR').value = 100;
            
        }
    }

    // DARKMODE
    function addDarkmodeWidget() {
        new Darkmode().showWidget();
    }
    window.addEventListener('load', addDarkmodeWidget);


    // SLIDER
    const allRanges = document.querySelectorAll(".range-wrap");
    allRanges.forEach(wrap => {
        const range = wrap.querySelector(".range");
        const bubble = wrap.querySelector(".bubble");

        range.addEventListener("input", () => {
            setBubble(range, bubble);
        });
        setBubble(range, bubble);
    });

    function setBubble(range, bubble) {
        const val = range.value;
        const min = range.min ? range.min : 0;
        const max = range.max ? range.max : 100;
        const newVal = Number(((val - min) * 100) / (max - min));
        bubble.innerHTML = val;

        // Sorta magic numbers based on size of the native UI thumb
        bubble.style.left = `calc(${newVal}% + (${6 - newVal * 0.15}px))`;
    }
</script>
</html>